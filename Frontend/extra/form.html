<!DOCTYPE html><!--  Last Published: Wed Mar 01 2023 13:47:17 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="63e0f5fdcff1a16f5d88802f" data-wf-site="63e0f5fdcff1a1df6d888027">
<head>
  <meta charset="utf-8">
  <title>Form</title>
  <meta content="Form" property="og:title">
  <meta content="Form" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link href="../css/normalize.css" rel="stylesheet" type="text/css">
  <link href="../css/components.css" rel="stylesheet" type="text/css">
  <link href="../css/casino-icore.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Varela:400","Inter:100,200,300,regular,500,600,700,800,900"]  }});</script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="../images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="../images/webclip.png" rel="apple-touch-icon">
</head>
<body>
  <div class="page-wrapper">
    <div class="wf-section">
      <div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="header-wrapper simple w-nav">
        <div class="container-default">
          <div class="header-content-wrapper">
            <div class="header-middle">
              <a href="#" class="header-logo-link w-nav-brand"><img src="../images/icorepay-blue.svg" loading="lazy" alt="" class="image logo"></a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="overflow-hidden position-relative">
      <div class="section hero form wf-section">
        <div class="inner-container _416px"></div>
        <div class="container-default w-container">
          <div class="inner-container _754px center">
            <div class="inner-container _675px center">
              <div class="card demo">
                <div id="form" class="demo-form-block w-form">
                  <form id="demo" name="wf-form-Demo" data-name="Demo" method="get" class="demo-form">
                    <div class="input-wrapper"><label for="offer-name">Offer Name</label><input type="text" class="input w-input" maxlength="256" name="offer-name" data-name="offer-name" placeholder="" id="offer-name" required=""></div>
                    <div class="input-wrapper"><label for="offer-description">Offer Description</label><input type="text" class="input w-input" maxlength="256" name="offer-description" data-name="offer-description" placeholder="" id="offer-description"></div>
                    <div id="w-node-_5868c544-93e2-6224-20f3-22c1cc7b2a69-5d88802f" class="merchant-wrapper">
                      <div id="w-node-e9d34a6f-69f0-6749-3d75-7c3d97a97ba3-5d88802f" class="merchant">
                        <div class="input-wrapper"><label for="merchant-addr-1">eToken Address</label><input type="text" class="input w-input" maxlength="256" name="merchant-addr-1" data-name="merchant-addr-1" placeholder="" id="merchant-addr-1"></div>
                        <div class="input-wrapper"><label for="amount-1">Amount</label><input type="text" class="input w-input" maxlength="256" name="amount-1" data-name="amount-1" placeholder="" id="amount-1"></div>
                      </div>
                    </div>
                    <div class="input-wrapper"><label for="merchant-name">Merchant Name</label><input type="text" class="input w-input" maxlength="256" name="merchant-name" data-name="merchant-name" placeholder="" id="merchant-name"></div>
                    <div class="input-wrapper"><label for="invoice">Invoice</label><input type="text" class="input w-input" maxlength="256" name="invoice" data-name="invoice" placeholder="" id="invoice"></div>
                    <div class="input-wrapper"><label for="order-key">Custom Order Number</label><input type="text" class="input w-input" maxlength="256" name="order-key" data-name="order-key" placeholder="" id="order-key"></div>
                    <div class="input-wrapper"><label for="success-url">Success URL</label><input type="text" class="input w-input" maxlength="256" name="success-url" data-name="success-url" placeholder="" id="success-url"></div>
                    <div class="input-wrapper"><label for="cancel-url">Cancel URL</label><input type="text" class="input w-input" maxlength="256" name="cancel-url" data-name="cancel-url" placeholder="" id="cancel-url"></div>
                    <div class="input-wrapper"><label for="ipn-url">IPN URL</label><input type="text" class="input w-input" maxlength="256" name="ipn-url" data-name="ipn-url" placeholder="" id="ipn-url"></div>
                    <div id="w-node-_71d21d9b-a27a-66d7-66ab-73ff9c725b28-5d88802f" class="w-embed">
                      <style>
/* The switch - the box around the slider */
.switch {
    position: relative;
    display: inline-block;
    width: 60px;
    height: 34px;
    display: flex;
    align-items: center;
  }
  /* Hide default HTML checkbox */
  .switch input {
    opacity: 0;
    width: 0;
    height: 0;
    color: white;
  }
  .label {
    margin-left: 70px;
    min-width: 300px;
  }
  /* The slider */
  .slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #353c4a;
    -webkit-transition: .4s;
    transition: .4s;
  }
  .slider:before {
    position: absolute;
    content: "";
    height: 26px;
    width: 26px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    -webkit-transition: .4s;
    transition: .4s;
  }
  input:checked + .slider {
    background-color: #1b6eff;
  }
  input:focus + .slider {
    box-shadow: 0 0 1px #1b6eff;
  }
  input:checked + .slider:before {
    -webkit-transform: translateX(26px);
    -ms-transform: translateX(26px);
    transform: translateX(26px);
  }
  /* Rounded sliders */
  .slider.round {
    border-radius: 34px;
  }
  .slider.round:before {
    border-radius: 50%;
  }
</style>
                      <label class="switch">
                        <input id="return-json" type="checkbox" checked="" required="">
                        <span class="slider round"></span>
                        <span class="label">Return JSON?</span>
                      </label>
                    </div>
                    <div id="w-node-_86585c80-886c-e8c8-2cb6-23ea541f20c2-5d88802f" class="w-embed"><button class="btn-primary full mg-top-20px" type="button" onclick="handleForm()">Create Invoice</button></div>
                    <a id="w-node-bcacb7d3-6caa-2c57-427a-009e9a8f0149-5d88802f" href="#" class="btn-primary full mg-top-20px w-button">Button Text</a>
                    <div id="w-node-f5af4e24-edc7-422f-cfc4-c899bd805855-5d88802f" class="w-embed"><button class="btn-secondary full mg-top-20px" type="button" onclick="addMerchant()">Add Merchant</button></div>
                  </form>
                  <div id="success" class="success-message">
                    <div class="grid-1-column">
                      <div class="grid-2-columns demo mg-bottom-24px">
                        <div id="w-node-_0f8be5eb-4e9e-6441-e9f8-249673f619f6-5d88802f" class="display-3"><strong>Pay ID</strong></div>
                        <div id="pay-id" class="display-3 text-span-light w-node-_03370e03-ce9b-b89c-44a0-e1bb97b07052-5d88802f">XFN1D</div>
                      </div>
                      <div class="grid-2-columns demo">
                        <div id="w-node-_31f14ed1-b575-aad8-47b4-e29974dbf19c-5d88802f"><strong>Status:</strong></div>
                        <div id="w-node-_31f14ed1-b575-aad8-47b4-e29974dbf19f-5d88802f"><span class="text-span-red">Unpaid</span></div>
                      </div>
                      <div class="grid-2-columns demo">
                        <div id="w-node-fde99239-bdf6-efd8-848b-cc7a2315c3a1-5d88802f"><strong>Offer Name:</strong></div>
                        <div id="offer-name-result" class="w-node-fde99239-bdf6-efd8-848b-cc7a2315c3a4-5d88802f">Offer Name</div>
                      </div>
                      <div class="grid-2-columns demo">
                        <div id="w-node-c59a0447-fede-7fb9-3ddc-d8756d5f2aea-5d88802f"><strong>Offer Description :</strong></div>
                        <div id="offer-desc-result" class="w-node-c59a0447-fede-7fb9-3ddc-d8756d5f2aed-5d88802f">Offer Description</div>
                      </div>
                      <div class="grid-2-columns demo">
                        <div id="w-node-_2f61b46c-dacb-d43a-c3f2-aca2f760b458-5d88802f"><strong>eToken Address:</strong></div>
                        <div id="address-result" class="w-node-_2f61b46c-dacb-d43a-c3f2-aca2f760b45b-5d88802f">ecash:qrwatjg40pa2gcjttrh552hlmlpnqzhjssgp4wayu8, ecash:qrwatjg40pa2gcjttrh552hlmlpnqzhjssgp4wayu8</div>
                      </div>
                      <div class="grid-2-columns demo">
                        <div id="w-node-_63f97e07-5078-46f6-8db5-42f734a658b2-5d88802f"><strong>Amount:</strong></div>
                        <div id="amount-result" class="w-node-_63f97e07-5078-46f6-8db5-42f734a658b5-5d88802f">Amount</div>
                      </div>
                      <div class="grid-2-columns demo">
                        <div id="w-node-_94c2ab33-b849-170e-bbc5-ff815d16fe2f-5d88802f"><strong>Merchant Name:</strong></div>
                        <div id="merchant-result" class="w-node-_94c2ab33-b849-170e-bbc5-ff815d16fe32-5d88802f">Merchant Name</div>
                      </div>
                      <div class="grid-2-columns demo">
                        <div id="w-node-b4612728-198b-e463-34f8-f1ca3f24a636-5d88802f"><strong>Invoice:</strong></div>
                        <div id="invoice-result" class="w-node-b4612728-198b-e463-34f8-f1ca3f24a639-5d88802f">Invoice Number</div>
                      </div>
                      <div class="grid-2-columns demo">
                        <div id="w-node-_22a98aeb-560c-2092-d444-87e4f060391d-5d88802f"><strong>Order Number:</strong></div>
                        <div id="order-key-result" class="w-node-_22a98aeb-560c-2092-d444-87e4f0603920-5d88802f">Order Number</div>
                      </div>
                      <div class="grid-2-columns demo">
                        <div id="w-node-_4c0dc261-c7f3-0f8c-4765-bc82e89f8d27-5d88802f"><strong>Success URL:</strong></div>
                        <div id="success-result" class="w-node-_4c0dc261-c7f3-0f8c-4765-bc82e89f8d2a-5d88802f">Success URL</div>
                      </div>
                      <div class="grid-2-columns demo">
                        <div id="w-node-_194ddf66-787c-ca85-0b95-310763db3ceb-5d88802f"><strong>Error URL:</strong></div>
                        <div id="error-result" class="w-node-_194ddf66-787c-ca85-0b95-310763db3cee-5d88802f">Error URL</div>
                      </div>
                      <div class="grid-2-columns demo">
                        <div id="w-node-b4776821-e62b-f417-90e2-375492b78898-5d88802f"><strong>IPN URL:</strong></div>
                        <div id="ipn-result" class="w-node-b4776821-e62b-f417-90e2-375492b7889b-5d88802f">IPN URL</div>
                      </div>
                    </div>
                    <div id="qr-wrapper" class="qr-wrapper">
                      <div id="w-node-_22c04cd6-8fab-48a4-4140-9b6aad924b54-5d88802f" class="mg-top-20px">
                        <div class="mg-bottom-4px">QR Code:</div><img src="../images/Unknown.png" loading="lazy" id="qr-code" alt="" class="image rounded w-node-_2dbb5ac2-94dc-153b-eb21-ac867af86237-5d88802f">
                      </div>
                    </div>
                    <div id="w-node-a0b9e644-318e-d02d-9e11-de28ff5ec870-5d88802f" class="buttons-row center mg-top-75px">
                      <a id="pay-button" href="#" target="_blank" class="btn-primary mg-top-20px w-button">Click Here To Pay</a>
                      <div class="w-embed"><button id="qr-button" class="btn-secondary full mg-top-20px" type="button" onclick="getQR()">Get QR Code</button></div>
                    </div>
                  </div>
                  <div id="error-message" class="error-message">
                    <div class="flex-horizontal gap-10px">
                      <div class="image-wrapper image-circle _20px"><img src="../images/remove_1remove.png" loading="lazy" alt="" class="image cover"></div>
                      <div id="error">ERROR: Error message</div>
                    </div>
                  </div>
                  <div class="success-message w-form-done"></div>
                  <div class="error-message mg-top-40px w-form-fail"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="position-absolute bg-grid extended">
        <div class="bg-grid-lights-demo"><img src="../images/shape-light-grid.svg" loading="lazy" style="-webkit-transform:translate3d(0, 200%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-moz-transform:translate3d(0, 200%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-ms-transform:translate3d(0, 200%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);transform:translate3d(0, 200%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);opacity:0" data-w-id="a5306664-16d1-7d1f-f074-72543e457d5e" id="w-node-a5306664-16d1-7d1f-f074-72543e457d5e-5d88802f" alt="" class="image grid-comet"><img src="../images/shape-light-grid.svg" loading="lazy" style="-webkit-transform:translate3d(0, 200%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-moz-transform:translate3d(0, 200%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-ms-transform:translate3d(0, 200%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);transform:translate3d(0, 200%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);opacity:0" data-w-id="2146a677-c4a1-b7ba-f500-f682169ebf8d" id="w-node-_2146a677-c4a1-b7ba-f500-f682169ebf8d-5d88802f" alt="" class="image grid-comet"><img src="../images/shape-light-grid.svg" loading="lazy" style="-webkit-transform:translate3d(0, 200%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-moz-transform:translate3d(0, 200%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-ms-transform:translate3d(0, 200%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);transform:translate3d(0, 200%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);opacity:0" data-w-id="a5306664-16d1-7d1f-f074-72543e457d5f" id="w-node-a5306664-16d1-7d1f-f074-72543e457d5f-5d88802f" alt="" class="image grid-comet"><img src="../images/shape-light-grid.svg" loading="lazy" style="-webkit-transform:translate3d(0, 200%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-moz-transform:translate3d(0, 200%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-ms-transform:translate3d(0, 200%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);transform:translate3d(0, 200%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);opacity:0" data-w-id="a5306664-16d1-7d1f-f074-72543e457d60" id="w-node-a5306664-16d1-7d1f-f074-72543e457d60-5d88802f" alt="" class="image grid-comet"></div>
      </div>
    </div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=63e0f5fdcff1a1df6d888027" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="../js/casino-icore.js" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
  <script>
// counter to keep track of how many merchant fields have been added
let merchantCounter = 2;
let payId;
let payUrl;
/**
 * Creates a new form element for a merchant's address and amount
 * and appends it after the first merchant element
 */
function addMerchant() {
    const firstMerchant = document.querySelector('.merchant');
    const newMerchant = document.createElement('div');
    newMerchant.classList.add('merchant-fields');
    // Create merchant address input
    const merchantAddrInput = document.createElement('input');
    merchantAddrInput.setAttribute('id', `merchant-addr-${merchantCounter}`);
    merchantAddrInput.setAttribute('type', 'text');
    merchantAddrInput.setAttribute('required', true);
    merchantAddrInput.setAttribute('class', 'input');
    // Create amount input
    const amountInput = document.createElement('input');
    amountInput.setAttribute('id', `amount-${merchantCounter}`);
    amountInput.setAttribute('type', 'text');
    amountInput.setAttribute('required', true);
    amountInput.setAttribute('class', 'input');
    // Create delete button
    const deleteButton = document.createElement('button');
    deleteButton.innerText = 'x';
    deleteButton.setAttribute('class', 'btn-clear');
    deleteButton.addEventListener('click', function () {
        deleteMerchant(this);
    });
    // Append elements to the new merchant element
    newMerchant.appendChild(merchantAddrInput);
    newMerchant.appendChild(amountInput);
    newMerchant.appendChild(deleteButton);
    // insert the new div element after the first merchant element
    firstMerchant.insertAdjacentElement('afterend', newMerchant);
    // increment the merchant counter
    merchantCounter++;
}
/**
 * Removes a merchant element when the delete button is clicked
 */
function deleteMerchant(elem) {
    // remove the parent element (the merchant div element)
    elem.parentNode.remove();
    // decrement the merchant counter
    merchantCounter--;
}
async function getQR() {
 console.log(payId);
 // create a new request for the QR code
  let qrImage,
      qrReq,
      qrHeader = new Headers();
  qrHeader.append('Accept', 'image/png');
  qrReq = new Request(payUrl, { 
    method: 'GET',
    headers: qrHeader,
    mode: 'cors'
  });
  fetch(qrReq) 
    .then(response => response.blob())
    .then((blob) => {
    qrImage = URL.createObjectURL(blob) 
    //set the QR code image source
    document.getElementById('qr-code').src = qrImage;
    document.getElementById('qr-button').style.display = 'none'
    document.getElementById('qr-wrapper').style.display = 'block';
  })
    .catch((err) => {
    console.log('ERROR:', err.message);
  });
}
async function handleForm() { 
    // base URI for the payment API
    const uri = 'https://bux.digital/v1/pay/?';
    // object to hold the form data
    const params = {
        merchant_name: document.getElementById('merchant-name').value,
        invoice: document.getElementById('invoice').value,
        order_key: document.getElementById('order-key').value,
        merchant_addr: [],
        amount: [],
        offer_name: document.getElementById('offer-name').value,
        offer_description: document.getElementById('offer-description').value,
        success_url: document.getElementById('success-url').value,
        cancel_url: document.getElementById('cancel-url').value,
        ipn_url: document.getElementById('ipn-url').value,
        return_json: document.getElementById('return-json').value
    };
    // loop through each merchant field and add the values to the params object
    for (let i = 0; i < merchantCounter - 1 ; i++ ){
        params.merchant_addr.push(document.getElementById(`merchant-addr-${i + 1}`).value);
        params.amount.push(document.getElementById(`amount-${i + 1}`).value);
    }
    // create the invoice URI by appending the params to the base URI
    let invoiceUri = uri + new URLSearchParams(params).toString(),
        invoiceHeader = new Headers(); 
    invoiceHeader.append('Content-Type', 'application/json'); 
    // create a new request object with the invoice URI, GET method, and invoice header
    const invoice = new Request(invoiceUri, { 
        method: 'GET',
        headers: invoiceHeader,
        mode: 'cors'
    });
    // fetch the invoice
    await fetch(invoice)
        .then(response => response.json())
        .then((data) => {
            // store the payment URL and log the data to the console
            paymentUrl = data.paymentUrl;
            console.log(paymentUrl);
            console.log(data);
      			payId = data.paymentId;
            payUrl = paymentUrl;
    	      // display the success content
            document.getElementById('merchant-result').textContent = params.merchant_name;
            document.getElementById('invoice-result').textContent = params.invoice;
            document.getElementById('order-key-result').textContent = params.order_key;
            document.getElementById('address-result').textContent = params.merchant_addr;
            document.getElementById('amount-result').textContent = params.amount;
            document.getElementById('offer-name-result').textContent = params.offer_name;
            document.getElementById('offer-desc-result').textContent = params.offer_description;
            document.getElementById('success-result').textContent = params.success_url;
            document.getElementById('error-result').textContent = params.cancel_url;
            document.getElementById('ipn-result').textContent = params.ipn_url;
            document.getElementById('pay-id').textContent = payId;
            // set the href attribute of the "Pay" button to the payment URL
            document.getElementById('pay-button').href = paymentUrl;
            // hide the form and show the success message
            document.getElementById("demo").style.display = "none";
            document.getElementById("success").style.display = "block";
        })
        .catch((err) => {
            // log the error message to the console
            console.log('ERROR:', err.message);
            // display the error message on the page
            document.getElementById('error-message').style.display = 'flex'
            document.getElementById('error').innerText = 'ERROR: ' + err.message; 
        });
} 
</script>
</body>
</html>